{"version":3,"sources":["lib/UserService.js"],"names":["userService","rep","_this","_currentUser","CURRENT_USER_NAME","getCurrentUser","getSessionEntities","setCurrentUser","user","saveSessionEntities","getUser","email","password","users","getEntities","keys","length","i","toLowerCase","repository"],"mappings":"AAAA;;AAEA,IAAIA,WAAW,GAAI,UAASC,GAAT,EAAa;AAC5B,MAAMC,KAAK,GAAG,EAAd;AACA,MAAIC,YAAY,GAAG,IAAnB;AACA,MAAMC,iBAAiB,GAAG,wBAA1B;;AAEAF,EAAAA,KAAK,CAACG,cAAN,GAAuB,YAAU;AAC7B,QAAG,CAACF,YAAJ,EAAiB;AACbA,MAAAA,YAAY,GAAGF,GAAG,CAACK,kBAAJ,CAAuBF,iBAAvB,CAAf;AACH;;AACD,WAAOD,YAAP;AACH,GALD;;AAMAD,EAAAA,KAAK,CAACK,cAAN,GAAuB,UAASC,IAAT,EAAc;AACjCL,IAAAA,YAAY,GAAGK,IAAf;AACAP,IAAAA,GAAG,CAACQ,mBAAJ,CAAwBL,iBAAxB,EAA2CI,IAA3C;AACH,GAHD;;AAIAN,EAAAA,KAAK,CAACQ,OAAN,GAAgB,UAASC,KAAT,EAAgBC,QAAhB,EAAyB;AACrC,QAAMC,KAAK,GAAGZ,GAAG,CAACa,WAAJ,CAAgBb,GAAG,CAACc,IAAJ,CAASP,IAAzB,CAAd;;AACA,QAAGK,KAAK,IAAIA,KAAK,CAACG,MAAlB,EAAyB;AACrB,WAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGJ,KAAK,CAACG,MAAzB,EAAiCC,CAAC,EAAlC,EAAqC;AACjC,YAAIT,IAAI,GAAGK,KAAK,CAACI,CAAD,CAAhB;;AACA,YAAGT,IAAI,CAACI,QAAL,IAAiBJ,IAAI,CAACG,KAAtB,IAA+BH,IAAI,CAACI,QAAL,IAAiBA,QAAhD,IAA4DJ,IAAI,CAACG,KAAL,CAAWO,WAAX,MAA4BP,KAAK,CAACO,WAAN,EAA3F,EAA+G;AAC3G,iBAAOV,IAAP;AACH;AACJ;AACJ;;AACD,WAAO,IAAP;AACH,GAXD;;AAaA,SAAON,KAAP;AACH,CA7BiB,CA6BfiB,UA7Be,CAAlB","sourcesContent":["'use strict';\r\n\r\nvar userService = (function(rep){\r\n    const _this = {};\r\n    let _currentUser = null;\r\n    const CURRENT_USER_NAME = 'itnewsblog.currentUser';\r\n\r\n    _this.getCurrentUser = function(){\r\n        if(!_currentUser){\r\n            _currentUser = rep.getSessionEntities(CURRENT_USER_NAME);\r\n        }\r\n        return _currentUser;\r\n    };\r\n    _this.setCurrentUser = function(user){\r\n        _currentUser = user;\r\n        rep.saveSessionEntities(CURRENT_USER_NAME, user);\r\n    };\r\n    _this.getUser = function(email, password){\r\n        const users = rep.getEntities(rep.keys.user);\r\n        if(users && users.length){\r\n            for(var i = 0; i < users.length; i++){\r\n                var user = users[i];\r\n                if(user.password && user.email && user.password == password && user.email.toLowerCase() == email.toLowerCase()){\r\n                    return user;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n\r\n    return _this;\r\n})(repository);"],"file":"UserService.js"}