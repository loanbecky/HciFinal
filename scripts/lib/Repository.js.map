{"version":3,"sources":["lib/Repository.js"],"names":["repository","_this","_available","storageAvailable","CATEGORY_ENTITY_NAME","USER_ENTITY_NAME","ROLE_ENTITY_NAME","USERROLE_ENTITY_NAME","PERMISSION_ENTITY_NAME","ROLEPERMISSION_ENTITY_NAME","keys","user","role","permission","userRole","rolePermission","category","getEntities","name","jsonValue","localStorage","getItem","JSON","parse","saveEntities","entities","setItem","stringify","insertEntity","entity","newId","length","found","i","id","push","getSessionEntities","sessionStorage","saveSessionEntities","getEntityById","updateEntity","updateData","prop","toLowerCase","deleteEntityById","splice","getEntityByName","entityName","users","email","password","roles","createdOn","Date","updatedOn","userRoles","userId","roleId","rolePermissions","permissionId","read","create","update","delete","storage","window","x","removeItem","e","DOMException","code"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nvar repository = (function () {\r\n    const _this = {};\r\n    const _available = storageAvailable();\r\n    const CATEGORY_ENTITY_NAME = 'itnewsblog.categories';\r\n    const USER_ENTITY_NAME = 'itnewsblog.users';\r\n    const ROLE_ENTITY_NAME = 'itnewsblog.roles';\r\n    const USERROLE_ENTITY_NAME = 'itnewsblog.userroles';\r\n    const PERMISSION_ENTITY_NAME = 'itnewsblog.permissions';\r\n    const ROLEPERMISSION_ENTITY_NAME = 'itnewsblog.rolepermissions';\r\n\r\n    _this.keys = {\r\n        user: USER_ENTITY_NAME,\r\n        role: ROLE_ENTITY_NAME,\r\n        permission: PERMISSION_ENTITY_NAME,\r\n        userRole: USERROLE_ENTITY_NAME,\r\n        rolePermission: ROLEPERMISSION_ENTITY_NAME,\r\n        category: CATEGORY_ENTITY_NAME\r\n    };\r\n\r\n    _this.getEntities = function (name) {\r\n        if (_available) {\r\n            let jsonValue = localStorage.getItem(name);\r\n            if (jsonValue) {\r\n                return JSON.parse(jsonValue);\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    _this.saveEntities = function (name, entities) {\r\n        if (_available) {\r\n            localStorage.setItem(name, JSON.stringify(entities));\r\n        }\r\n    };\r\n    _this.insertEntity = function (name, entity) {\r\n        if (_available) {\r\n            var entities = _this.getEntities(name) || [];\r\n            var newId = 1;\r\n            if (entities && entities.length) {\r\n                newId = entities.length + 1;\r\n                do {\r\n                    var found = false;\r\n                    for (var i = 0; i < entities.length; i++) {\r\n                        if (entities[i].id == newId) {\r\n                            found = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (!found) break;\r\n                    newId++;\r\n                } while (true);\r\n            }\r\n            entity.id = newId;\r\n            entities.push(entity);\r\n            _this.saveEntities(name, entities);\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    _this.getSessionEntities = function (name) {\r\n        if (_available) {\r\n            let jsonValue = sessionStorage.getItem(name);\r\n            if (jsonValue) {\r\n                return JSON.parse(jsonValue);\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    _this.saveSessionEntities = function (name, entities) {\r\n        if (_available) {\r\n            sessionStorage.setItem(name, JSON.stringify(entities));\r\n        }\r\n    };\r\n    _this.getEntityById = function (name, id) {\r\n        const entities = _this.getEntities(name);\r\n        if (entities && entities.length) {\r\n            for (var i = 0; i < entities.length; i++) {\r\n                const entity = entities[i];\r\n                if (entity.id && entity.id == id) {\r\n                    return entity;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    _this.updateEntity = function (name, id, updateData) {\r\n        const entities = _this.getEntities(name);\r\n        if (entities && entities.length) {\r\n            for (var i = 0; i < entities.length; i++) {\r\n                const entity = entities[i];\r\n                if (entity.id && entity.id == id) {\r\n                    for (var prop in updateData) {\r\n                        if (prop.toLowerCase() == 'id') continue;\r\n                        entity[prop] = updateData[prop];\r\n                    }\r\n                    _this.saveEntities(name, entities);\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    _this.deleteEntityById = function (name, id) {\r\n        const entities = _this.getEntities(name);\r\n        if (entities && entities.length) {\r\n            for (var i = 0; i < entities.length; i++) {\r\n                const entity = entities[i];\r\n                if (entity.id && entity.id == id) {\r\n                    entities.splice(i, 1);\r\n                    _this.saveEntities(name, entities);\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    _this.getEntityByName = function (entityName, name) {\r\n        const entities = _this.getEntities(entityName);\r\n        if (entities && entities.length) {\r\n            for (var i = 0; i < entities.length; i++) {\r\n                const entity = entities[i];\r\n                if (entity.name && entity.name.toLowerCase() == name.toLowerCase()) {\r\n                    return entity;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n\r\n    //initial data\r\n    if (!_this.getEntities(USER_ENTITY_NAME)) {\r\n        const users = [\r\n            { id: 1, email: 'nguyentuandang7@gmail.com', password: '123456' },\r\n            { id: 2, email: 'nguyenthingocdieu@gmail.com', password: '123456' },\r\n            { id: 3, email: 'vuthingat@gmail.com', password: '123456' }\r\n        ];\r\n        _this.saveEntities(USER_ENTITY_NAME, users);\r\n    }\r\n    if (!_this.getEntities(ROLE_ENTITY_NAME)) {\r\n        const roles = [\r\n            { id: 1, name: 'Guest', createdOn: new Date(), updatedOn: new Date() },\r\n            { id: 2, name: 'Administrator', createdOn: new Date(), updatedOn: new Date() },\r\n            { id: 3, name: 'Editor', createdOn: new Date(), updatedOn: new Date() }\r\n        ];\r\n        _this.saveEntities(ROLE_ENTITY_NAME, roles);\r\n    }\r\n    if (!_this.getEntities(PERMISSION_ENTITY_NAME)) {\r\n        const permission = [\r\n            { id: 1, name: 'Blog Post' },\r\n            { id: 2, name: 'Categories' },\r\n            { id: 3, name: 'User' },\r\n            { id: 4, name: 'Priviledge' },\r\n            { id: 5, name: 'Role' }\r\n        ];\r\n        _this.saveEntities(PERMISSION_ENTITY_NAME, permission);\r\n    }\r\n    if (!_this.getEntities(USERROLE_ENTITY_NAME)) {\r\n        const userRoles = [\r\n            { id: 1, userId: 1, roleId: 2 },\r\n            { id: 2, userId: 2, roleId: 2 },\r\n            { id: 3, userId: 3, roleId: 3 }\r\n        ];\r\n        _this.saveEntities(USERROLE_ENTITY_NAME, userRoles);\r\n    }\r\n    if (!_this.getEntities(ROLEPERMISSION_ENTITY_NAME)) {\r\n        const rolePermissions = [\r\n            { id: 1, roleId: 1, permissionId: 1, read: true, create: false, update: false, delete: false },\r\n            { id: 2, roleId: 1, permissionId: 2, read: true, create: false, update: false, delete: false },\r\n            { id: 3, roleId: 2, permissionId: 1, read: true, create: true, update: true, delete: true },\r\n            { id: 4, roleId: 2, permissionId: 2, read: true, create: true, update: true, delete: true },\r\n            { id: 5, roleId: 2, permissionId: 3, read: true, create: true, update: true, delete: true },\r\n            { id: 6, roleId: 2, permissionId: 4, read: true, create: true, update: true, delete: true },\r\n            { id: 7, roleId: 2, permissionId: 5, read: true, create: true, update: true, delete: true }\r\n        ];\r\n        _this.saveEntities(ROLEPERMISSION_ENTITY_NAME, rolePermissions);\r\n    }\r\n\r\n    //check sessionStorage is available\r\n    function storageAvailable() {\r\n        try {\r\n            var storage = window['sessionStorage'],\r\n                x = '__storage_test__';\r\n            storage.setItem(x, x);\r\n            storage.removeItem(x);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return e instanceof DOMException && (\r\n                // everything except Firefox\r\n                e.code === 22 ||\r\n                // Firefox\r\n                e.code === 1014 ||\r\n                // test name field too, because code might not be present\r\n                // everything except Firefox\r\n                e.name === 'QuotaExceededError' ||\r\n                // Firefox\r\n                e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\r\n                // acknowledge QuotaExceededError only if there's something already stored\r\n                storage.length !== 0;\r\n        }\r\n    };\r\n\r\n    return _this;\r\n})();"],"file":"Repository.js"}