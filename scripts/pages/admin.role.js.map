{"version":3,"sources":["pages/admin.role.js"],"names":["$","rep","nav","per","RESOURCES","commonService","actions","canDoActions","ROLE","$roleContainer","$roleTemplate","$addRoleBtn","$addRoleMessage","$addModal","$addForm","find","$addnameInput","$addRoleAlertMessage","$addRoleBtnSubmit","$editModal","$editForm","$editRoleAlertMessage","$editRoleSubmit","$deleteModal","$deleteRoleBtn","fillDataList","create","attr","addClass","removeClass","on","val","html","submit","e","preventDefault","valid","name","length","canDo","ACTIONS","CREATE","role","getEntityByName","keys","text","insertEntity","createdOn","Date","updatedOn","modal","alertMessage","delete","id","currentTarget","data","click","DELETE","getEntityById","result","deleteEntityById","update","editId","UPDATE","existingNameRole","updateEntity","READ","roles","getEntities","map","getRenderItem","tmpl","appendTo","item","index","createdAt","moment","format","updatedAt","jQuery","repository","navigationService","permissionService"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\n(function ($, rep, nav, per, RESOURCES, commonService) {\r\n    const actions = per.canDoActions(RESOURCES.ROLE);\r\n\r\n    const $roleContainer = $('#roleContainer');\r\n\r\n    const $roleTemplate = $('#roleTemplate');\r\n    const $addRoleBtn = $('#addRoleBtn');\r\n    const $addRoleMessage = $('#addRoleMessage');\r\n\r\n    const $addModal = $('#addRole');\r\n    const $addForm = $addModal.find('form');\r\n    const $addnameInput = $addForm.find('[name=name]');\r\n    const $addRoleAlertMessage = $addForm.find('#addRoleAlertMessage');\r\n    const $addRoleBtnSubmit = $addForm.find('#addRoleSubmit');\r\n\r\n    const $editModal = $('#editRole');\r\n    const $editForm = $editModal.find('form');\r\n    const $editRoleAlertMessage = $editForm.find('#editRoleAlertMessage');\r\n    const $editRoleSubmit = $editForm.find('#editRoleSubmit');\r\n\r\n    const $deleteModal = $('#deleteRole');\r\n    const $deleteRoleBtn = $deleteModal.find('#deleteRoleBtn');\r\n\r\n    $(function () {\r\n        fillDataList();\r\n\r\n        if (!actions.create) {\r\n            $addRoleBtn.attr('disabled', true);\r\n            $addRoleBtn.addClass('disabled');\r\n            $addRoleMessage.removeClass('d-none');\r\n        } else {\r\n            $addModal.on('show.bs.modal', function () {\r\n                $addnameInput.val('');\r\n                $addForm.find('[data-valmsg-for=name]').html('');\r\n                $addRoleAlertMessage.addClass('d-none');\r\n            });\r\n            $addForm.submit(function (e) {\r\n                e.preventDefault();\r\n                if (!$addForm.valid()) return;\r\n                var name = $addnameInput.val();\r\n                if (!name || !name.length) return;\r\n                if (!per.canDo(RESOURCES.ROLE, ACTIONS.CREATE)) return;\r\n                var role = rep.getEntityByName(rep.keys.role, name);\r\n                if (role == null) {\r\n                    $addRoleAlertMessage.text('');\r\n                    $addRoleAlertMessage.addClass('d-none');\r\n\r\n                    $addRoleBtnSubmit.attr('disabled', true);\r\n                    rep.insertEntity(rep.keys.role, { name: name, createdOn: new Date(), updatedOn: new Date() });\r\n                    $addModal.modal('hide');\r\n                    fillDataList();\r\n\r\n                    commonService.alertMessage(`Add role ${name} is successfully!`);\r\n                } else {\r\n                    $addRoleAlertMessage.text('Role name is existing');\r\n                    $addRoleAlertMessage.removeClass('d-none');\r\n                }\r\n\r\n                $addRoleBtnSubmit.attr('disabled', false);\r\n            });\r\n        }\r\n        if (!actions.delete) {\r\n            $roleContainer.on('click', '.delete-role', function (e) {\r\n                commonService.alertMessage(\"You don't have delete permission\");\r\n                return false;\r\n            });\r\n        } else {\r\n            $roleContainer.on('click', '.delete-role[data-id]', function (e) {\r\n                e.preventDefault();\r\n                var id = $(e.currentTarget).data('id');\r\n                $deleteRoleBtn.data('id', id);\r\n                $deleteModal.modal('show');\r\n            });\r\n            $deleteRoleBtn.click(function (e) {\r\n                e.preventDefault();\r\n                var id = $deleteRoleBtn.data('id');\r\n                if (!id) return;\r\n                if (!per.canDo(RESOURCES.ROLE, ACTIONS.DELETE)) {\r\n                    commonService.alertMessage(\"You don't have delete permission\");\r\n                    $deleteModal.modal('hide');\r\n                    return;\r\n                }\r\n                var role = rep.getEntityById(rep.keys.role, id);\r\n                if (role == null) {\r\n                    commonService.alertMessage('Role is not found');\r\n                } else {\r\n                    var result = rep.deleteEntityById(rep.keys.role, role.id);\r\n                    if (result) {\r\n                        commonService.alertMessage(`Delete role '${role.name}' is successfully`);\r\n                        $deleteModal.modal('hide');\r\n                        fillDataList();\r\n                    } else {\r\n                        commonService.alertMessage(`Delete role '${role.name}' is failed`);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        if (!actions.update) {\r\n            $roleContainer.on('click', '.edit-role', function (e) {\r\n                commonService.alertMessage(\"You don't have update permission\");\r\n                return false;\r\n            });\r\n        } else {\r\n            $roleContainer.on('click', '.edit-role[data-id]', function (e) {\r\n                e.preventDefault();\r\n                var id = $(e.currentTarget).data('id');\r\n                $editModal.data('id', id);\r\n                $editModal.modal('show');\r\n            });\r\n            $editModal.on('show.bs.modal', function (e) {\r\n                var id = $editModal.data('id');\r\n                var role = rep.getEntityById(rep.keys.role, id);\r\n                if (role) {\r\n                    $editRoleAlertMessage.text('');\r\n                    $editRoleAlertMessage.addClass('d-none');\r\n                    $editForm.find('[name=name]').val(role.name);\r\n                } else {\r\n                    $editRoleAlertMessage.text('Role is not found');\r\n                    $editRoleAlertMessage.removeClass('d-none');\r\n                }\r\n                $editModal.find('[data-valmsg-for=name]').html('');\r\n            });\r\n            $editForm.submit(function (e) {\r\n                e.preventDefault();\r\n                if (!$editForm.valid()) return;\r\n                var name = $editForm.find('[name=name]').val();\r\n                var editId = $editModal.data('id');\r\n                if (!name || !name.length) return;\r\n                if (!per.canDo(RESOURCES.ROLE, ACTIONS.UPDATE)) return;\r\n                var role = rep.getEntityById(rep.keys.role, editId);\r\n                if (role == null) {\r\n                    $editRoleAlertMessage.text('Role is not found');\r\n                    $editRoleAlertMessage.removeClass('d-none');\r\n                } else {\r\n                    var existingNameRole = rep.getEntityByName(rep.keys.role, name);\r\n                    if (existingNameRole == null || existingNameRole != null && existingNameRole.id == role.id) {\r\n                        $editRoleAlertMessage.text('');\r\n                        $editRoleAlertMessage.addClass('d-none');\r\n\r\n                        $editRoleSubmit.attr('disabled', true);\r\n                        var result = rep.updateEntity(rep.keys.role, role.id, { name: name, updatedOn: new Date() });\r\n                        if (result) {\r\n                            commonService.alertMessage(`Update role is successfully!`);\r\n                        } else {\r\n                            commonService.alertMessage(`Update role is failed!`);\r\n                        }\r\n                        $editModal.modal('hide');\r\n                        fillDataList();\r\n                    } else {\r\n                        $editRoleAlertMessage.text('Role name is existing');\r\n                        $editRoleAlertMessage.removeClass('d-none');\r\n                    }\r\n                }\r\n\r\n                $editRoleSubmit.attr('disabled', false);\r\n\r\n            });\r\n        }\r\n    });\r\n    function fillDataList() {\r\n        $roleContainer.html('');\r\n        if (per.canDo(RESOURCES.ROLE, ACTIONS.READ)) {\r\n            var roles = rep.getEntities(rep.keys.role);\r\n            if (roles && roles.length) {\r\n                var data = $.map(roles, getRenderItem);\r\n                $roleTemplate.tmpl(data).appendTo($roleContainer);\r\n            } else {\r\n                $roleContainer.html(`<tr><td colspan=\"5\"><div class=\"alert alert-info\">Roles data is empty</div></td></tr>`);\r\n            }\r\n        } else {\r\n            $roleContainer.html(`<tr><td colspan=\"5\"><div class=\"alert alert-info\">You don't have read permission</div></td></tr>`);\r\n        }\r\n    }\r\n    function getRenderItem(item, index) {\r\n        return {\r\n            index: index + 1,\r\n            name: item.name,\r\n            id: item.id,\r\n            createdAt: moment(new Date(item.createdOn)).format('D MMM YYYY'),\r\n            updatedAt: moment(new Date(item.updatedOn)).format('D MMM YYYY')\r\n        };\r\n    }\r\n})(jQuery, repository, navigationService, permissionService, RESOURCES, commonService);"],"file":"admin.role.js"}